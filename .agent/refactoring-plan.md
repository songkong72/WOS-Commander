# ğŸ“‹ index.tsx ì†ŒìŠ¤ ë¶„ë¦¬ ë¦¬íŒ©í† ë§ ê³„íšì„œ

> **ëŒ€ìƒ íŒŒì¼**: `app/index.tsx` (5,435ì¤„)
> **ëª©í‘œ**: ìœ ì§€ë³´ìˆ˜ ê°€ëŠ¥í•œ í¬ê¸°(ê° 300~800ì¤„)ë¡œ ë¶„ë¦¬
> **ì›ì¹™**: ì„¸ì…˜ë³„ 1ëª¨ë“ˆ ë¶„ë¦¬ â†’ ì»¤ë°‹ â†’ ë¹Œë“œ í™•ì¸ â†’ ë‹¤ìŒ ì„¸ì…˜

---

## ğŸ“ í˜„ì¬ íŒŒì¼ êµ¬ì¡° ë¶„ì„

```
app/index.tsx (5,435ì¤„)
â”œâ”€â”€ Imports (1-51)
â”œâ”€â”€ Home() ì»´í¬ë„ŒíŠ¸ (53-5434)
â”‚   â”œâ”€â”€ State ì„ ì–¸ (53-170)
â”‚   â”œâ”€â”€ ìœ í‹¸ í•¨ìˆ˜ë“¤ (171-1860)
â”‚   â”œâ”€â”€ ì¸ì¦/ê´€ë¦¬ì ë¡œì§ (1932-2066)
â”‚   â”œâ”€â”€ ì´ë²¤íŠ¸ ë°ì´í„° ì²˜ë¦¬ (2068-2761)
â”‚   â”œâ”€â”€ ì´ë²¤íŠ¸ ì¹´ë“œ ë Œë”ë§ (2763-3228)
â”‚   â”œâ”€â”€ Gate í™”ë©´ ë Œë”ë§ (3241-3770)
â”‚   â”œâ”€â”€ ëŒ€ì‹œë³´ë“œ í—¤ë”/ì¹´ë“œ (3770-4023)
â”‚   â”œâ”€â”€ ì´ë²¤íŠ¸ ì„¹ì…˜ (4025-4370)
â”‚   â”œâ”€â”€ ëª¨ë‹¬ë“¤ (4370-5100)
â”‚   â””â”€â”€ ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ (5100-5434)
```

---

## ğŸ”§ ì„¸ì…˜ë³„ ë¶„ë¦¬ ê³„íš

### ì„¸ì…˜ 1: ìœ í‹¸ í•¨ìˆ˜ ë¶„ë¦¬ â­ (ê°€ì¥ ì•ˆì „, ë¨¼ì € ì‹œì‘)

**ìƒˆ íŒŒì¼**: `app/utils/eventHelpers.ts`

ë‹¤ìŒ í•¨ìˆ˜ë“¤ì„ `Home()` ë°”ê¹¥ìœ¼ë¡œ ì¶”ì¶œ:

| í•¨ìˆ˜ëª… | ë¼ì¸ | ì„¤ëª… |
|:---|:---:|:---|
| `pad(n)` | 1745 | ìˆ«ì íŒ¨ë”© |
| `toLocal(kstStr)` | 1747-1752 | KSTâ†’ë¡œì»¬ ë³€í™˜ |
| `toUTC(kstStr)` | 1754-1756 | KSTâ†’UTC ë³€í™˜ |
| `processConversion(str, diff)` | 1763-1807 | ì‹œê°„ ë³€í™˜ í•µì‹¬ ë¡œì§ |
| `splitSchedulePart(str)` | 1810-1860 | ìŠ¤ì¼€ì¤„ ë¬¸ìì—´ íŒŒì‹± |
| `getKoreanDayOfWeek(date)` | 2494-2498 | ìš”ì¼ ê°€ì ¸ì˜¤ê¸° |
| `translateDay(day)` | 2500-2507 | ìš”ì¼ ë²ˆì—­ |
| `translateLabel(label)` | 2509-2517 | ë¼ë²¨ ë²ˆì—­ |
| `formatRemainingTime(seconds)` | 1545-1556 | ë‚¨ì€ ì‹œê°„ í¬ë§· |

**ìƒˆ íŒŒì¼**: `app/utils/dynamicFontSize.ts`

| í•¨ìˆ˜ëª… | ë¼ì¸ | ì„¤ëª… |
|:---|:---:|:---|
| `dfs(baseClass)` | 171-190 | ë‹¤ì´ë‚˜ë¯¹ í°íŠ¸ ì‚¬ì´ì¦ˆ |

**ì‘ì—… ìˆœì„œ**:
1. `app/utils/eventHelpers.ts` íŒŒì¼ ìƒì„±
2. ìœ„ í•¨ìˆ˜ë“¤ì„ ë³µì‚¬ (Home ë‚´ë¶€ ì˜ì¡´ì„± ì—†ëŠ” ìˆœìˆ˜ í•¨ìˆ˜ë§Œ)
3. `t` (ë²ˆì—­ í•¨ìˆ˜)ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë°›ë„ë¡ ì‹œê·¸ë‹ˆì²˜ ë³€ê²½
4. `index.tsx`ì—ì„œ í•´ë‹¹ í•¨ìˆ˜ ì‚­ì œ í›„ import ì¶”ê°€
5. ë¹Œë“œ í™•ì¸ â†’ ì»¤ë°‹

**âš ï¸ ì£¼ì˜ì‚¬í•­**:
- `toLocal`, `toUTC`, `processConversion`ì€ `t` í•¨ìˆ˜ì— ì˜ì¡´í•˜ë¯€ë¡œ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬í•´ì•¼ í•¨
- `convertTime` (1758-1761)ì€ `timezone` stateì— ì˜ì¡´í•˜ë¯€ë¡œ Home ë‚´ë¶€ì— ë‚¨ê¹€
- `translateDay`, `translateLabel`ë„ `t`ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë°›ì•„ì•¼ í•¨

---

### ì„¸ì…˜ 2: ì´ë²¤íŠ¸ ìƒíƒœ íŒì • ë¡œì§ ë¶„ë¦¬

**ìƒˆ íŒŒì¼**: `app/utils/eventStatus.ts`

| í•¨ìˆ˜ëª… | ë¼ì¸ | ì„¤ëª… |
|:---|:---:|:---|
| `getEventSchedule(event)` | 1311-1342 | ì´ë²¤íŠ¸ ìŠ¤ì¼€ì¤„ ë§¤ì¹­ |
| `getEventEndDate(event)` | 1344-1416 | ì¢…ë£Œì¼ ê³„ì‚° |
| `checkWeeklyExpired(str)` | 1418-1456 | ì£¼ê°„ ë§Œë£Œ ì²´í¬ |
| `isEventExpired(event)` | 1458-1498 | ë§Œë£Œ ì—¬ë¶€ |
| `getRemainingSeconds(str)` | 1500-1536 | ë‚¨ì€ ì´ˆ ê³„ì‚° |
| `getNextResetSeconds()` | 1538-1543 | ë‹¤ìŒ ë¦¬ì…‹ ì‹œê°„ |
| `checkItemActive(str)` | 1558-1646 | ê°œë³„ ìŠ¬ë¡¯ í™œì„± ì²´í¬ |
| `isVisibleInList(event)` | 1648-1660 | ëª©ë¡ í‘œì‹œ ì—¬ë¶€ |
| `isEventActive(event)` | 1708-1743 | ì´ë²¤íŠ¸ í™œì„± ì—¬ë¶€ |
| `getBundleId(ev)` | 2305-2310 | ì´ë²¤íŠ¸ ë²ˆë“¤ ID |
| `getSortTime(ev)` | 2312-2356 | ì •ë ¬ ê°€ì¤‘ì¹˜ |

**âš ï¸ ì£¼ì˜ì‚¬í•­**:
- `getEventSchedule`ëŠ” `schedules` (Firestore ë°ì´í„°)ì— ì˜ì¡´ â†’ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬
- `isEventExpired`, `isEventActive`ëŠ” `getEventSchedule`ì— ì˜ì¡´ â†’ ê°™ì€ íŒŒì¼ì— ë„£ì–´ì•¼ í•¨
- `now` (í˜„ì¬ ì‹œê°„), `t` (ë²ˆì—­)ë„ íŒŒë¼ë¯¸í„°í™” í•„ìš”
- DATE_RANGE_IDS ìƒìˆ˜(40-51ì¤„)ë„ í•¨ê»˜ ì´ë™

---

### ì„¸ì…˜ 3: Gate/ë¡œë”© í™”ë©´ ë¶„ë¦¬

**ìƒˆ íŒŒì¼**: `app/screens/GateScreen.tsx`

**ì¶”ì¶œ ë²”ìœ„**: 3241-3770ì¤„ (ì•½ 530ì¤„)

í¬í•¨ ë‚´ìš©:
- ë¡œë”© í™”ë©´(isLoading) ë Œë”ë§ (3241-3259)
- Gate í™”ë©´(isGateOpen) ì „ì²´ (3261-3770)
  - ì„œë²„/ì—°ë§¹ ì…ë ¥ í¼
  - ë¡œê·¸ì¸/ê°€ì… í† ê¸€
  - `renderHistorySuggestions` (3230-3256)
  - `renderGateManualContent` (242-465)

**ìƒˆ íŒŒì¼**: `app/hooks/useGateLogic.ts`

í¬í•¨ ë‚´ìš©:
- `handleEnterAlliance()` (1055-1303) - Gate ì§„ì… ë¡œì§
- `loadHistory()` (1008-1034) - íˆìŠ¤í† ë¦¬ ë¡œë“œ
- `saveToHistory()` (192-206) - íˆìŠ¤í† ë¦¬ ì €ì¥
- `handleResetSettings()` (1038-1053) - ì„¤ì • ë¦¬ì…‹
- ê´€ë ¨ stateë“¤: inputServer, inputAlliance, inputUserId, inputPassword ë“±

**âš ï¸ ì£¼ì˜ì‚¬í•­**:
- GateScreenì€ AuthContext, ThemeContextì— ì˜ì¡´
- `handleEnterAlliance`ëŠ” Firestore(db)ì™€ ë§ì€ stateì— ì˜ì¡´ â†’ custom hookìœ¼ë¡œ ì¶”ì¶œ
- RegisterModal í˜¸ì¶œ ì—°ê²° í™•ì¸ í•„ìš”

---

### ì„¸ì…˜ 4: ì´ë²¤íŠ¸ ì¹´ë“œ + ëŒ€ì‹œë³´ë“œ ì»´í¬ë„ŒíŠ¸ ë¶„ë¦¬

**ìƒˆ íŒŒì¼**: `app/components/EventCard.tsx`

| í•¨ìˆ˜ëª… | ë¼ì¸ | ì„¤ëª… |
|:---|:---:|:---|
| `renderEventCard` | 2763-3228 | ì´ë²¤íŠ¸ ì¹´ë“œ ì „ì²´ (465ì¤„) |
| `formatEventTimeCompact` | 2540-2761 | ì‹œê°„ í¬ë§· (220ì¤„) |
| `renderWithHighlightedDays` | 2519-2538 | ìš”ì¼ í•˜ì´ë¼ì´íŠ¸ |

**ìƒˆ íŒŒì¼**: `app/components/EventSectionHeader.tsx`

ì¶”ì¶œ ë²”ìœ„: 4025-4130ì¤„
- Section 2: Sticky Header (Weekly Program + Tabs)
- Timezone í† ê¸€
- View Mode í† ê¸€

**ìƒˆ íŒŒì¼**: `app/components/DashboardCards.tsx`

ì¶”ì¶œ ë²”ìœ„: 3770-4023ì¤„
- Feature Cards (ì´ë²¤íŠ¸, ì „ëµ, ì˜ì›…)
- Welcome í—¤ë”
- ë¡œê·¸ì¸ ê°€ì´ë“œ

**âš ï¸ ì£¼ì˜ì‚¬í•­**:
- `renderEventCard`ê°€ ê°€ì¥ í¬ê³  ë³µì¡ (465ì¤„, ì¤‘ì²© í•¨ìˆ˜ 3ê°œ í¬í•¨)
- `getFormattedDateRange`, `getEventIcon`, `getSoonRemainingSeconds`ë„ í•¨ê»˜ ì´ë™
- ì¹´ë“œëŠ” ë§ì€ props í•„ìš” â†’ interface ì •ì˜ í•„ìˆ˜

---

## ğŸ“Œ ë¶„ë¦¬ í›„ ì˜ˆìƒ ê²°ê³¼

```
app/
â”œâ”€â”€ index.tsx                    (~1,500ì¤„, ë©”ì¸ ë Œë”ë§ë§Œ)
â”œâ”€â”€ screens/
â”‚   â””â”€â”€ GateScreen.tsx           (~600ì¤„)
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ EventCard.tsx            (~700ì¤„)
â”‚   â”œâ”€â”€ EventSectionHeader.tsx   (~150ì¤„)
â”‚   â””â”€â”€ DashboardCards.tsx       (~300ì¤„)
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ useGateLogic.ts          (~350ì¤„)
â””â”€â”€ utils/
    â”œâ”€â”€ eventHelpers.ts          (~250ì¤„)
    â”œâ”€â”€ eventStatus.ts           (~400ì¤„)
    â””â”€â”€ dynamicFontSize.ts       (~30ì¤„)
```

---

## âš¡ ì„¸ì…˜ë³„ ì‘ì—… í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿

ê° ì„¸ì…˜ì—ì„œ ë‹¤ìŒ í”„ë¡¬í”„íŠ¸ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”:

### ì„¸ì…˜ 1 í”„ë¡¬í”„íŠ¸:
```
app/index.tsxì—ì„œ ìœ í‹¸ í•¨ìˆ˜ë¥¼ ë¶„ë¦¬í•©ë‹ˆë‹¤.
.agent/refactoring-plan.mdì˜ "ì„¸ì…˜ 1" ì„¹ì…˜ì„ ì½ê³  ê·¸ëŒ€ë¡œ ì‹¤í–‰í•˜ì„¸ìš”.

ì‘ì—… ìˆœì„œ:
1. app/utils/eventHelpers.ts ìƒì„±
2. pad, toLocal, toUTC, processConversion, splitSchedulePart, 
   getKoreanDayOfWeek, translateDay, translateLabel, formatRemainingTime í•¨ìˆ˜ ì´ë™
3. t(ë²ˆì—­í•¨ìˆ˜)ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë°›ë„ë¡ ì‹œê·¸ë‹ˆì²˜ ë³€ê²½
4. index.tsxì—ì„œ í•´ë‹¹ í•¨ìˆ˜ ì‚­ì œ + import ì¶”ê°€
5. app/utils/dynamicFontSize.ts ìƒì„± í›„ dfs í•¨ìˆ˜ ì´ë™
6. npm run webìœ¼ë¡œ ë¹Œë“œ í™•ì¸
7. ì»¤ë°‹ & í‘¸ì‹œ
```

### ì„¸ì…˜ 2 í”„ë¡¬í”„íŠ¸:
```
app/index.tsxì—ì„œ ì´ë²¤íŠ¸ ìƒíƒœ íŒì • ë¡œì§ì„ ë¶„ë¦¬í•©ë‹ˆë‹¤.
.agent/refactoring-plan.mdì˜ "ì„¸ì…˜ 2" ì„¹ì…˜ì„ ì½ê³  ì‹¤í–‰í•˜ì„¸ìš”.
ì„¸ì…˜ 1ì—ì„œ ì´ë¯¸ utils/eventHelpers.tsê°€ ë¶„ë¦¬ë¨.
```

### ì„¸ì…˜ 3 í”„ë¡¬í”„íŠ¸:
```
app/index.tsxì—ì„œ Gate/ë¡œë”© í™”ë©´ì„ ë³„ë„ ì»´í¬ë„ŒíŠ¸ë¡œ ë¶„ë¦¬í•©ë‹ˆë‹¤.
.agent/refactoring-plan.mdì˜ "ì„¸ì…˜ 3" ì„¹ì…˜ì„ ì½ê³  ì‹¤í–‰í•˜ì„¸ìš”.
```

### ì„¸ì…˜ 4 í”„ë¡¬í”„íŠ¸:
```
app/index.tsxì—ì„œ ì´ë²¤íŠ¸ ì¹´ë“œì™€ ëŒ€ì‹œë³´ë“œ ì»´í¬ë„ŒíŠ¸ë¥¼ ë¶„ë¦¬í•©ë‹ˆë‹¤.
.agent/refactoring-plan.mdì˜ "ì„¸ì…˜ 4" ì„¹ì…˜ì„ ì½ê³  ì‹¤í–‰í•˜ì„¸ìš”.
```

---

## ğŸ›¡ï¸ ì•ˆì „ ê·œì¹™

1. **í•œ ì„¸ì…˜ì— í•œ ëª¨ë“ˆë§Œ** ë¶„ë¦¬
2. **ë°˜ë“œì‹œ ë¹Œë“œ í™•ì¸** í›„ ì»¤ë°‹
3. ë¶„ë¦¬ ì‹œ **ì›ë³¸ ë™ì‘ ë³€ê²½ ê¸ˆì§€** (ë¦¬íŒ©í† ë§ë§Œ, ê¸°ëŠ¥ ë³€ê²½ ì—†ìŒ)
4. **import ê²½ë¡œ** ê¼¼ê¼¼íˆ í™•ì¸ (ìƒëŒ€ ê²½ë¡œ ì£¼ì˜)
5. ë¶„ë¦¬ ëŒ€ìƒ í•¨ìˆ˜ê°€ `Home()` ë‚´ë¶€ stateì— ì˜ì¡´í•˜ë©´ **íŒŒë¼ë¯¸í„°í™”** í•„í„°
6. TypeScript íƒ€ì…ì€ ë³„ë„ `types.ts`ë¡œ ë¶„ë¦¬ ê²€í† 
